#!/bin/bash

declare -A prefix_emoji=(
  ["init"]="🎉"
  ["fix"]="🐛"
  ["feature"]="✨"
  ["remove"]="🔥"

  ["add"]="✨"
  ["debug"]="🔍"
  ["refactor"]="♻️"
  ["docs"]="📚"
  ["merge"]="🔀"
  ["revert"]="↩"
  ["test"]="🧪"
  ["update"]="🍆"
)

commit_msg_file="$1"
commit_msg_msg=$(cat "$commit_msg_file")

prefix_found=false
for prefix in "${!prefix_emoji[@]}"; do
  if [[ "${commit_msg_msg}" == "${prefix}"* ]]; then
    prefix_found=true
    break
  fi
done

if ! $prefix_found; then
  prefix="update"
fi

commit_desc=${commit_msg_msg#"${prefix}" }
new_commit_msg="${prefix_emoji[${prefix}]} $prefix: $commit_desc"

echo -e " $new_commit_msg"
echo -e "$new_commit_msg" >"$commit_msg_file"
